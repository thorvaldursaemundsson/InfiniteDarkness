(this.webpackJsonpinfinitedarkness=this.webpackJsonpinfinitedarkness||[]).push([[5],{62:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(19),a=i(18);function o(t,e){return!e||"object"!==Object(n.a)(e)&&"function"!==typeof e?Object(a.a)(t):e}},63:function(t,e,i){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.d(e,"a",(function(){return n}))},65:function(t,e,i){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}i.d(e,"a",(function(){return a}))},75:function(t,e,i){"use strict";i.r(e);var n=i(3),a=i(7),o=i(0),r=i.n(o),s=i(9),h=i(8),c=i(62),l=i(63),u=i(65),d=function(t){function e(t){var i;return Object(s.a)(this,e),(i=Object(c.a)(this,Object(l.a)(e).call(this,t))).mount=void 0,i.hexagonAngle=0,i.sideLength=25,i.hexHeight=0,i.hexRadius=0,i.hexRectangleHeight=0,i.hexRectangleWidth=0,i.state={outputData:":)",currentIcons:t.initialIcons,isVisible:!1},i}return Object(u.a)(e,t),Object(h.a)(e,[{key:"showHexmat",value:function(){return!1===this.state.isVisible?null:r.a.createElement(g,{initialIcons:this.props.initialIcons,boardHeight:this.props.boardHeight,boardWidth:this.props.boardWidth})}},{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return t.setState({isVisible:!t.state.isVisible})}},"show"),this.showHexmat())}}]),e}(r.a.Component),g=function(t){function e(t){var i;return Object(s.a)(this,e),(i=Object(c.a)(this,Object(l.a)(e).call(this,t))).mount=void 0,i.hexagonAngle=0,i.sideLength=25,i.hexHeight=0,i.hexRadius=0,i.hexRectangleHeight=0,i.hexRectangleWidth=0,i.state={outputData:":)",currentIcons:t.initialIcons},i}return Object(u.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.initializeBoard();var e=this.mount;if(null!==e&&void 0!==e){var i,n=!1,a=0,o=0,r=0,s=0;e.addEventListener("mousemove",(function(e){var i=t.mount;if(null!==i&&void 0!==i){var a=i.getBoundingClientRect(),o=e.clientX-a.left,h=e.clientY-a.top;r=Math.floor(h/(t.hexHeight+t.sideLength));var c=(s=Math.floor((o-r%2*t.hexRadius)/t.hexRectangleWidth))*t.hexRectangleWidth+r%2*t.hexRadius,l=r*(t.hexHeight+t.sideLength),u=t.initializeBoard();r>=0&&r<t.props.boardWidth&&s>=0&&s<t.props.boardHeight&&void 0!==u&&(u.strokeStyle="#FF0000",u.lineWidth=3,t.drawHexagon(u,c,l,!1)),n=!0}})),e.addEventListener("mousedown",(function(r){if(n=!1,null!==e&&void 0!==e){var s=e.getBoundingClientRect(),h=r.clientX-s.left,c=r.clientY-s.top;o=Math.floor(c/(t.hexHeight+t.sideLength)),a=Math.floor((h-o%2*t.hexRadius)/t.hexRectangleWidth),i=t.findIconAtHex(a,o),console.log(a,o,i)}})),e.addEventListener("mouseup",(function(){if(void 0!==i&&!0===n){var e=t.state.currentIcons;for(var a in e){var o=e[a];o.symbol===i.symbol&&(console.log("moving ".concat(o.symbol," from x ").concat(o.startX," -> ").concat(r," & y ").concat(o.startY," -> ").concat(s)),o.startY=r,o.startX=s)}t.setState({currentIcons:e}),t.initializeBoard()}i=void 0,n=!1})),e.addEventListener("mouseleave",(function(){i=void 0}))}}},{key:"getIconPosition",value:function(t){var e=2*this.hexRadius*(t.startX+.25)+t.startY%2*this.hexRectangleWidth/2,i=.75*this.hexRectangleHeight*(t.startY+0)+this.hexRectangleHeight/2;return console.log("position: ",e,i),{x:e,y:i}}},{key:"componentDidUpdate",value:function(){var t=this.mount;null!==t&&void 0!==t&&(null!==t.getContext("2d")&&this.initializeBoard())}},{key:"initializeBoard",value:function(){this.setVariables();var t=this.mount;if(null!==t&&void 0!==t){var e=t.getContext("2d");if(null!==e)return e.clearRect(0,0,2*this.props.boardWidth*this.sideLength,2*this.props.boardHeight*this.sideLength),e.fillStyle="#000000",e.strokeStyle="#666666",e.lineWidth=1,this.drawIconsOnBoard(e),this.drawBoard(e,this.props.boardWidth,this.props.boardHeight),e}}},{key:"findIconAtHex",value:function(t,e){for(var i in this.state.currentIcons){var n=this.state.currentIcons[i],a=n.startX,o=n.startY;if(t===a&&e===o)return n}}},{key:"setVariables",value:function(){this.hexagonAngle=.523598776,this.hexHeight=Math.sin(this.hexagonAngle)*this.sideLength,this.hexRadius=Math.cos(this.hexagonAngle)*this.sideLength,this.hexRectangleHeight=this.sideLength+2*this.hexHeight,this.hexRectangleWidth=2*this.hexRadius}},{key:"drawIconsOnBoard",value:function(t){for(var e in this.state.currentIcons){var i=this.state.currentIcons[e],n=this.getIconPosition(i),a=n.x,o=n.y;t.font="11px arial",t.fillStyle="black",t.fillText("".concat(i.symbol),a,o)}}},{key:"drawBoard",value:function(t,e,i){for(var n=0;n<e;++n)for(var a=0;a<i;++a)this.drawHexagon(t,n*this.hexRectangleWidth+a%2*this.hexRadius,a*(this.sideLength+this.hexHeight),!1)}},{key:"drawHexagon",value:function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";t.beginPath(),t.moveTo(e+this.hexRadius,i),t.lineTo(e+this.hexRectangleWidth,i+this.hexHeight),t.lineTo(e+this.hexRectangleWidth,i+this.hexHeight+this.sideLength),t.lineTo(e+this.hexRadius,i+this.hexRectangleHeight),t.lineTo(e,i+this.sideLength+this.hexHeight),t.lineTo(e,i+this.hexHeight),t.closePath(),""!==a&&(t.fillStyle="#CCCCCC",t.fillText(a,e+this.hexRadius/2,i+1.5*this.hexRadius)),n&&t.fill(),t.stroke()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{style:{background:"white",width:"750px",height:"600px",overflow:"scroll"}},r.a.createElement("canvas",{height:this.props.boardHeight*this.sideLength*1.5,width:this.props.boardWidth*this.sideLength*1.8,onContextMenu:function(t){return t.preventDefault()},ref:function(e){return t.mount=e}}))}}]),e}(r.a.Component),f={width:"60px"};e.default=function(){var t=Object(o.useState)(18),e=Object(a.a)(t,2),i=e[0],s=e[1],h=Object(o.useState)(15),c=Object(a.a)(h,2),l=c[0],u=c[1],g=Object(o.useState)(""),v=Object(a.a)(g,2),x=v[0],p=v[1],b=Object(o.useState)([]),m=Object(a.a)(b,2),y=m[0],H=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",title:"width",style:f,value:i,onChange:function(t){return s(parseInt(t.target.value))}}),r.a.createElement("input",{type:"text",title:"height",style:f,value:l,onChange:function(t){return u(parseInt(t.target.value))}})," |",r.a.createElement("input",{type:"text",title:"add icon",style:f,value:x,onChange:function(t){return p(t.target.value)}}),r.a.createElement("button",{onClick:function(){return H([].concat(Object(n.a)(y),[{symbol:x,startX:0,startY:0}])),p(""),void console.log({icons:y})}},"Add"),r.a.createElement("br",null),r.a.createElement(d,{initialIcons:y,boardHeight:l,boardWidth:i}))}}}]);
//# sourceMappingURL=5.05ececb2.chunk.js.map