(this.webpackJsonpinfinitedarkness=this.webpackJsonpinfinitedarkness||[]).push([[5],{64:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(20),r=n(19);function a(e,t){return!t||"object"!==Object(i.a)(t)&&"function"!==typeof t?Object(r.a)(e):t}},65:function(e,t,n){"use strict";function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return i}))},67:function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}n.d(t,"a",(function(){return r}))},77:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n(7),a=n(0),o=n.n(a),s=n(11),c=n(9),u=n(8),l=n(64),h=n(65),d=n(67);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={outputData:":)",currentIcons:e.initialIcons,isVisible:!1,currentEdit:void 0,currentIconsTurns:void 0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){this.props.initialIcons.length!==this.state.currentIcons.length&&this.setState({currentIcons:this.props.initialIcons})}},{key:"showHexmat",value:function(){return!1===this.state.isVisible?null:o.a.createElement(m,{initialIcons:this.state.currentIcons,boardHeight:this.props.boardHeight,boardWidth:this.props.boardWidth})}},{key:"showEditor",value:function(){var e=this;return!1!==this.state.isVisible?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",null,"Character editor"),o.a.createElement("ul",null,this.state.currentIcons.map((function(t){return o.a.createElement("li",{key:"bmceitems_".concat(t.id),onClick:function(){return e.setState({currentEdit:t})}},t.symbol)}))),void 0!==this.state.currentEdit?o.a.createElement(v,{onChange:function(t){return e.editIcon(t)},icon:this.state.currentEdit}):null)}},{key:"editIcon",value:function(e){var t=this.state.currentIcons;for(var n in t){var i=t[n];i.id===e.id&&(i.sequence=e.sequence,i.speed=e.speed,i.symbol=e.symbol)}this.setState({currentIcons:t,currentEdit:void 0})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){e.setState({isVisible:!e.state.isVisible}),e.forceUpdate()}},"show"),this.showHexmat(),this.showEditor())}}]),t}(o.a.Component),p=function(e){var t=e.icons,n=e.onNext,i=Object(a.useState)(0),s=Object(r.a)(i,2),c=s[0],u=s[1],l=Object(a.useState)(0),h=Object(r.a)(l,2),d=h[0],f=h[1],g=t.sort((function(e,t){return t.sequence-e.sequence})),p=t.length>=1?g[0].sequence:0,b=c+1,v=function(e){f(p),u(e),g.length>0&&n(g[0])};return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){return v(1)}},"Begin/restart"),o.a.createElement("h5",null,"Round ",c),o.a.createElement("ul",null,g.filter((function(e){return e.sequence<=d})).map((function(e){return o.a.createElement("li",{key:"bmsqeuencer_".concat(e.id)},e.symbol," (",e.sequence,")",e.sequence===d?o.a.createElement("button",{onClick:function(){return function(){var e=g.filter((function(e){return e.sequence<d}));e.length>0?(f(e[0].sequence),n(e[0])):v(c+1)}()}},"Done"):null)}))),o.a.createElement("h5",null,"Round ",b),o.a.createElement("ul",null,g.filter((function(e){return e.sequence>d})).map((function(e){return o.a.createElement("li",{key:"bmsqeuencer_".concat(e.id)},e.symbol," (",e.sequence,")")}))))},b={width:"60px"},v=function(e){var t=e.icon,n=e.onChange,i=Object(a.useState)(t.symbol),c=Object(r.a)(i,2),u=c[0],l=c[1],h=Object(a.useState)(t.speed),d=Object(r.a)(h,2),g=d[0],p=d[1],v=Object(a.useState)(t.sequence),m=Object(r.a)(v,2),y=m[0],x=m[1];return o.a.createElement(o.a.Fragment,null,"Symbol: ",o.a.createElement("input",{type:"text",style:b,value:u,onChange:function(e){return l(e.target.value)}}),o.a.createElement("br",null),"Speed: ",o.a.createElement("input",{type:"text",style:b,value:g,onChange:function(e){return p(parseInt(e.target.value))}}),o.a.createElement("br",null),"Sequence: ",o.a.createElement("input",{type:"text",style:b,value:y,onChange:function(e){return x(parseInt(e.target.value))}}),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){return n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{symbol:u,speed:g,sequence:y}))}},"Save"))},m=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).mount=void 0,n.hexagonAngle=0,n.sideLength=25,n.hexHeight=0,n.hexRadius=0,n.hexRectangleHeight=0,n.hexRectangleWidth=0,n.state={outputData:":)",currentIcons:e.initialIcons,currentIconsTurns:void 0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.initializeBoard();var t=this.mount;if(null!==t&&void 0!==t){var n,i=!1,r=0,a=0,o=0,s=0;t.addEventListener("mousemove",(function(t){var r=e.mount;if(null!==r&&void 0!==r){var a=r.getBoundingClientRect(),c=t.clientX-a.left,u=t.clientY-a.top;o=Math.floor(u/(e.hexHeight+e.sideLength));var l=(s=Math.floor((c-o%2*e.hexRadius)/e.hexRectangleWidth))*e.hexRectangleWidth+o%2*e.hexRadius,h=o*(e.hexHeight+e.sideLength),d=r.getContext("2d");if(null===d)return;if(d.clearRect(0,0,2*e.props.boardWidth*e.sideLength,2*e.props.boardHeight*e.sideLength),d.fillStyle="#000000",d.strokeStyle="#666666",d.lineWidth=1,e.drawBoard(d,e.props.boardWidth,e.props.boardHeight),o>=0&&o<e.props.boardWidth&&s>=0&&s<e.props.boardHeight&&void 0!==d&&(d.strokeStyle="#FF0000",d.lineWidth=3,e.drawHexagon(d,l,h,!1),d.strokeStyle="#666666",d.lineWidth=1),void 0!==n&&void 0!==d)for(var f=0;f<e.props.boardWidth;++f)for(var g=0;g<e.props.boardHeight;++g)e.distanceBetweenPositions(f,g,n.startX,n.startY)<=n.speed&&(d.fillStyle="#9999FF",e.drawHexagon(d,f*e.hexRectangleWidth+g%2*e.hexRadius,g*(e.sideLength+e.hexHeight),!0));e.drawIconsOnBoard(d),i=!0}})),t.addEventListener("mousedown",(function(o){if(i=!1,null!==t&&void 0!==t){var s=t.getBoundingClientRect(),c=o.clientX-s.left,u=o.clientY-s.top;a=Math.floor(u/(e.hexHeight+e.sideLength)),r=Math.floor((c-a%2*e.hexRadius)/e.hexRectangleWidth),n=e.findIconAtHex(r,a)}})),t.addEventListener("mouseup",(function(){if(void 0!==n&&!0===i){var t=e.state.currentIcons;for(var r in t){var a=t[r];if(a.id===n.id){a.startY=o,a.startX=s;break}}e.setState({currentIcons:t}),e.initializeBoard()}n=void 0,i=!1})),t.addEventListener("mouseleave",(function(){n=void 0}))}}},{key:"distanceBetweenPositions",value:function(e,t,n,i){var r=Math.abs(e-n),a=Math.abs(t-i),o=0-e-t,s=0-n-i;Math.abs(o-s);return r+a}},{key:"getIconPosition",value:function(e){return{x:2*this.hexRadius*(e.startX+.25)+e.startY%2*this.hexRectangleWidth/2,y:.75*this.hexRectangleHeight*(e.startY+0)+this.hexRectangleHeight/2}}},{key:"componentDidUpdate",value:function(){this.props.initialIcons.length!==this.state.currentIcons.length&&this.setState({currentIcons:this.props.initialIcons});var e=this.mount;null!==e&&void 0!==e&&(null!==e.getContext("2d")&&this.initializeBoard())}},{key:"initializeBoard",value:function(){this.setVariables();var e=this.mount;if(null!==e&&void 0!==e){var t=e.getContext("2d");if(null!==t)return t.clearRect(0,0,2*this.props.boardWidth*this.sideLength,2*this.props.boardHeight*this.sideLength),t.fillStyle="#000000",t.strokeStyle="#666666",t.lineWidth=1,this.drawBoard(t,this.props.boardWidth,this.props.boardHeight),this.drawIconsOnBoard(t),t}}},{key:"findIconAtHex",value:function(e,t){for(var n in this.state.currentIcons){var i=this.state.currentIcons[n],r=i.startX,a=i.startY;if(e===r&&t===a)return i}}},{key:"setVariables",value:function(){this.hexagonAngle=.523598776,this.hexHeight=Math.sin(this.hexagonAngle)*this.sideLength,this.hexRadius=Math.cos(this.hexagonAngle)*this.sideLength,this.hexRectangleHeight=this.sideLength+2*this.hexHeight,this.hexRectangleWidth=2*this.hexRadius}},{key:"drawIconsOnBoard",value:function(e){for(var t in this.state.currentIcons){var n=this.state.currentIcons[t],i=this.getIconPosition(n),r=i.x,a=i.y;void 0===this.state.currentIconsTurns||n.id===this.state.currentIconsTurns.id&&(e.fillStyle="red",this.drawHexagon(e,n.startX*this.hexRectangleWidth+n.startY%2*this.hexRadius,n.startY*(this.sideLength+this.hexHeight),!0)),e.font="11px arial",e.fillStyle="black",e.fillText("".concat(n.symbol),r,a)}}},{key:"convertXyToXYZ",value:function(e,t){return""}},{key:"drawBoard",value:function(e,t,n){for(var i=0;i<t;++i)for(var r=0;r<n;++r)this.drawHexagon(e,i*this.hexRectangleWidth+r%2*this.hexRadius,r*(this.sideLength+this.hexHeight),!1,this.convertXyToXYZ(i,r))}},{key:"drawHexagon",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";e.beginPath(),e.moveTo(t+this.hexRadius,n),e.lineTo(t+this.hexRectangleWidth,n+this.hexHeight),e.lineTo(t+this.hexRectangleWidth,n+this.hexHeight+this.sideLength),e.lineTo(t+this.hexRadius,n+this.hexRectangleHeight),e.lineTo(t,n+this.sideLength+this.hexHeight),e.lineTo(t,n+this.hexHeight),e.closePath(),""!==r&&(e.fillStyle="#CCCCCC",e.fillText(r,t+this.hexRadius/2,n+1.5*this.hexRadius)),i&&e.fill(),e.stroke()}},{key:"render",value:function(){var e=this;return o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{style:{background:"white",width:"650px",height:"600px",overflow:"scroll"}},o.a.createElement("canvas",{height:this.props.boardHeight*this.sideLength*1.5,width:this.props.boardWidth*this.sideLength*1.8,onContextMenu:function(e){return e.preventDefault()},ref:function(t){return e.mount=t}}))),o.a.createElement("td",null,o.a.createElement(p,{icons:this.props.initialIcons,onNext:function(t){e.forceUpdate(),e.setState({currentIconsTurns:t})}})))))}}]),t}(o.a.Component),y={width:"60px"},x={width:"40px"},O="qwertyuiopasdfghjklzxcvbnm",E=function(){for(var e="",t=0;t<10;t++)e+=O[Math.floor(Math.random()*O.length)];return e};t.default=function(){var e=Object(a.useState)(18),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(15),u=Object(r.a)(c,2),l=u[0],h=u[1],d=Object(a.useState)(""),f=Object(r.a)(d,2),p=f[0],b=f[1],v=Object(a.useState)(0),m=Object(r.a)(v,2),O=m[0],j=m[1],I=Object(a.useState)(0),k=Object(r.a)(I,2),w=k[0],H=k[1],R=Object(a.useState)([]),S=Object(r.a)(R,2),C=S[0],W=S[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"text",title:"width",style:x,value:n,onChange:function(e){return s(parseInt(e.target.value))}}),o.a.createElement("input",{type:"text",title:"height",style:x,value:l,onChange:function(e){return h(parseInt(e.target.value))}})," |",o.a.createElement("input",{type:"text",title:"sequence",style:x,value:O,onChange:function(e){return j(parseInt(e.target.value))}}),o.a.createElement("input",{type:"text",title:"speed",style:x,value:w,onChange:function(e){return H(parseInt(e.target.value))}}),o.a.createElement("input",{type:"text",title:"add icon",style:y,value:p,onChange:function(e){return b(e.target.value)}}),o.a.createElement("button",{onClick:function(){return W([].concat(Object(i.a)(C),[{symbol:p,startX:C.length,startY:0,sequence:O,speed:w,id:E()}])),b(""),H(0),void j(0)}},"Add"),o.a.createElement("br",null),o.a.createElement(g,{initialIcons:C,boardHeight:l,boardWidth:n}))}}}]);
//# sourceMappingURL=5.15478fa6.chunk.js.map